# Android编译小结
正式开始一个新的平台，以前的项目拿到的代码都是供应商改好的，感觉有很多不规范的地方。

这次从一个全新的项目着手，严格按照android规范进行项目的添加、板级文件的支持。目标是争取不改动build目录下的文件，而是用好它的扩展机制。

## 在lunch中增加combo选项的标准方法
在执行完. build/envsetup.sh后，执行lunch，会出现lunch菜单：
```
You're building on Linux

Lunch menu... pick a combo:
     1. aosp_arm-eng
     2. aosp_arm64-eng
     3. aosp_mips-eng
     4. aosp_mips64-eng
     5. aosp_x86-eng
     6. aosp_x86_64-eng
     7. aosp_flounder-userdebug
     8. mini_emulator_mips-userdebug
     9. mini_emulator_x86-userdebug
     10. mini_emulator_arm64-userdebug
     11. mini_emulator_x86_64-userdebug
     12. m_e_arm-userdebug
     13. aosp_manta-userdebug
     ……
```
在build/envsetup.sh中只增加了默认的几项：
```shell
# add the default one here
add_lunch_combo aosp_arm-eng
add_lunch_combo aosp_arm64-eng
add_lunch_combo aosp_mips-eng
add_lunch_combo aosp_mips64-eng
add_lunch_combo aosp_x86-eng
add_lunch_combo aosp_x86_64-eng
```
lunch函数会到venor和device目录中寻找vendorsetup.sh，然后执行文件中类似的
```shell
add_lunch_combo aosp_flounder-userdebug
```
然后就会多出个
```
     7. aosp_flounder-userdebug
```
